"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/posts/[id]";
exports.ids = ["pages/api/posts/[id]"];
exports.modules = {

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./pages/api/posts/[id].js":
/*!*********************************!*\
  !*** ./pages/api/posts/[id].js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Enlazado Interno\nasync function interlinking(articulo, dataLinks, slug) {\n    const carpetaLinks = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"interlinking\");\n    let fileLinks = await fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(carpetaLinks + \"/\" + dataLinks, \"utf-8\");\n    let enlacesList = fileLinks.trim().split(\"\\n\");\n    // console.log(enlacesList);\n    let texto = await JSON.stringify(articulo);\n    async function insertarEnlaces(texto, anchoText, url) {\n        if (texto.includes(anchoText)) {\n            texto = await texto.replace(anchoText, \"[\" + anchoText + \"](\" + url + \")\");\n        }\n        return texto;\n    }\n    let anchoEnlacesCreados = [];\n    let numeroMaximoEnlaces = 10;\n    for (let datosLink of enlacesList){\n        let [anchoText, url] = datosLink.split(\",\");\n        if (anchoEnlacesCreados.length >= numeroMaximoEnlaces) {\n            return JSON.parse(texto);\n        }\n        // console.log(anchoEnlacesCreados.length);\n        let checkAncho = JSON.stringify(anchoEnlacesCreados);\n        if (!checkAncho.includes(anchoText) && texto.includes(anchoText) && slug != url) {\n            //  console.log(anchoText);\n            texto = await insertarEnlaces(texto, anchoText, url).then(anchoEnlacesCreados.push(anchoText));\n        }\n    }\n    return JSON.parse(texto);\n}\nasync function handler(req, res) {\n    let nombrePost = req.query.id;\n    const jsonDirectory = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\");\n    const fileContents = await fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(jsonDirectory);\n    // Si no exite el articulo\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(jsonDirectory + \"/\" + nombrePost + \".json\")) {\n        res.status(200).json(null);\n        return;\n    }\n    // Leer datos del articulo\n    const datosArticulo = JSON.parse(await fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(jsonDirectory + \"/\" + nombrePost + \".json\", \"utf-8\"));\n    // leer datos de los relacionados\n    let todosAticulos = await fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(jsonDirectory);\n    let relacionadosFile = await todosAticulos.filter((e)=>{\n        let fileName = jsonDirectory + \"/\" + e;\n        let data = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(fileName, \"utf-8\"));\n        if (data.parent === datosArticulo.parent) {\n            return data;\n        }\n    });\n    let relacionadosDatos = relacionadosFile.map((e)=>{\n        const datosArticulo = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(jsonDirectory + \"/\" + e, \"utf-8\"));\n        // delete datosArticulo.articulo;\n        const { articulo , ...postsRelacionados } = datosArticulo;\n        return {\n            postsRelacionados\n        };\n    });\n    datosArticulo.articuloIntelinking = await interlinking(datosArticulo.articulo, \"enlaces.csv\", datosArticulo.slug);\n    // console.log(datosArticulo.articuloIntelinking);\n    // Fin Enlazado Interno\n    datosArticulo.relacionados = relacionadosDatos;\n    //Return the content of the data file in json format\n    res.status(200).json(datosArticulo);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixHQUFHVjtRQUMzQyxPQUFPO1lBQUVVO1FBQWtCO0lBQzdCO0lBRUFWLGNBQWNXLG1CQUFtQixHQUFHLE1BQU1wRCxhQUN4Q3lDLGNBQWN4QyxRQUFRLEVBQ3RCLGVBQ0F3QyxjQUFjdEMsSUFBSTtJQUdwQixrREFBa0Q7SUFFbEQsdUJBQXVCO0lBRXZCc0MsY0FBY1ksWUFBWSxHQUFHSjtJQUU3QixvREFBb0Q7SUFDcERsQixJQUFJUSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDQztBQUN2QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWF3ZWIvLi9wYWdlcy9hcGkvcG9zdHMvW2lkXS5qcz82MjAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbi8vIEVubGF6YWRvIEludGVybm9cbmFzeW5jIGZ1bmN0aW9uIGludGVybGlua2luZyhhcnRpY3VsbywgZGF0YUxpbmtzLCBzbHVnKSB7XG4gIGNvbnN0IGNhcnBldGFMaW5rcyA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcImludGVybGlua2luZ1wiKTtcbiAgbGV0IGZpbGVMaW5rcyA9IGF3YWl0IGZzLnJlYWRGaWxlU3luYyhcbiAgICBjYXJwZXRhTGlua3MgKyBcIi9cIiArIGRhdGFMaW5rcyxcbiAgICBcInV0Zi04XCJcbiAgKTtcblxuICBsZXQgZW5sYWNlc0xpc3QgPSBmaWxlTGlua3MudHJpbSgpLnNwbGl0KFwiXFxuXCIpO1xuICAvLyBjb25zb2xlLmxvZyhlbmxhY2VzTGlzdCk7XG4gIGxldCB0ZXh0byA9IGF3YWl0IEpTT04uc3RyaW5naWZ5KGFydGljdWxvKTtcblxuICBhc3luYyBmdW5jdGlvbiBpbnNlcnRhckVubGFjZXModGV4dG8sIGFuY2hvVGV4dCwgdXJsKSB7XG4gICAgaWYgKHRleHRvLmluY2x1ZGVzKGFuY2hvVGV4dCkpIHtcbiAgICAgIHRleHRvID0gYXdhaXQgdGV4dG8ucmVwbGFjZShcbiAgICAgICAgYW5jaG9UZXh0LFxuICAgICAgICBcIltcIiArIGFuY2hvVGV4dCArIFwiXShcIiArIHVybCArIFwiKVwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dG87XG4gIH1cblxuICBsZXQgYW5jaG9FbmxhY2VzQ3JlYWRvcyA9IFtdO1xuICBsZXQgbnVtZXJvTWF4aW1vRW5sYWNlcyA9IDEwO1xuXG4gIGZvciAobGV0IGRhdG9zTGluayBvZiBlbmxhY2VzTGlzdCkge1xuICAgIGxldCBbYW5jaG9UZXh0LCB1cmxdID0gZGF0b3NMaW5rLnNwbGl0KFwiLFwiKTtcbiAgICBpZiAoYW5jaG9FbmxhY2VzQ3JlYWRvcy5sZW5ndGggPj0gbnVtZXJvTWF4aW1vRW5sYWNlcykge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dG8pO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhhbmNob0VubGFjZXNDcmVhZG9zLmxlbmd0aCk7XG4gICAgbGV0IGNoZWNrQW5jaG8gPSBKU09OLnN0cmluZ2lmeShhbmNob0VubGFjZXNDcmVhZG9zKTtcblxuICAgIGlmIChcbiAgICAgICFjaGVja0FuY2hvLmluY2x1ZGVzKGFuY2hvVGV4dCkgJiZcbiAgICAgIHRleHRvLmluY2x1ZGVzKGFuY2hvVGV4dCkgJiZcbiAgICAgIHNsdWcgIT0gdXJsXG4gICAgKSB7XG4gICAgICAvLyAgY29uc29sZS5sb2coYW5jaG9UZXh0KTtcbiAgICAgIHRleHRvID0gYXdhaXQgaW5zZXJ0YXJFbmxhY2VzKHRleHRvLCBhbmNob1RleHQsIHVybCkudGhlbihcbiAgICAgICAgYW5jaG9FbmxhY2VzQ3JlYWRvcy5wdXNoKGFuY2hvVGV4dClcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBKU09OLnBhcnNlKHRleHRvKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBsZXQgbm9tYnJlUG9zdCA9IHJlcS5xdWVyeS5pZDtcbiAgY29uc3QganNvbkRpcmVjdG9yeSA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcImRhdGFcIik7XG4gIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IGZzLnJlYWRkaXJTeW5jKGpzb25EaXJlY3RvcnkpO1xuXG4gIC8vIFNpIG5vIGV4aXRlIGVsIGFydGljdWxvXG4gIGlmICghZnMuZXhpc3RzU3luYyhqc29uRGlyZWN0b3J5ICsgXCIvXCIgKyBub21icmVQb3N0ICsgXCIuanNvblwiKSkge1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKG51bGwpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIExlZXIgZGF0b3MgZGVsIGFydGljdWxvXG4gIGNvbnN0IGRhdG9zQXJ0aWN1bG8gPSBKU09OLnBhcnNlKFxuICAgIGF3YWl0IGZzLnJlYWRGaWxlU3luYyhqc29uRGlyZWN0b3J5ICsgXCIvXCIgKyBub21icmVQb3N0ICsgXCIuanNvblwiLCBcInV0Zi04XCIpXG4gICk7XG5cbiAgLy8gbGVlciBkYXRvcyBkZSBsb3MgcmVsYWNpb25hZG9zXG4gIGxldCB0b2Rvc0F0aWN1bG9zID0gYXdhaXQgZnMucmVhZGRpclN5bmMoanNvbkRpcmVjdG9yeSk7XG5cbiAgbGV0IHJlbGFjaW9uYWRvc0ZpbGUgPSBhd2FpdCB0b2Rvc0F0aWN1bG9zLmZpbHRlcigoZSkgPT4ge1xuICAgIGxldCBmaWxlTmFtZSA9IGpzb25EaXJlY3RvcnkgKyBcIi9cIiArIGU7XG4gICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhmaWxlTmFtZSwgXCJ1dGYtOFwiKSk7XG4gICAgaWYgKGRhdGEucGFyZW50ID09PSBkYXRvc0FydGljdWxvLnBhcmVudCkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICB9KTtcbiAgbGV0IHJlbGFjaW9uYWRvc0RhdG9zID0gcmVsYWNpb25hZG9zRmlsZS5tYXAoKGUpID0+IHtcbiAgICBjb25zdCBkYXRvc0FydGljdWxvID0gSlNPTi5wYXJzZShcbiAgICAgIGZzLnJlYWRGaWxlU3luYyhqc29uRGlyZWN0b3J5ICsgXCIvXCIgKyBlLCBcInV0Zi04XCIpXG4gICAgKTtcbiAgICAvLyBkZWxldGUgZGF0b3NBcnRpY3Vsby5hcnRpY3VsbztcbiAgICBjb25zdCB7IGFydGljdWxvLCAuLi5wb3N0c1JlbGFjaW9uYWRvcyB9ID0gZGF0b3NBcnRpY3VsbztcbiAgICByZXR1cm4geyBwb3N0c1JlbGFjaW9uYWRvcyB9O1xuICB9KTtcblxuICBkYXRvc0FydGljdWxvLmFydGljdWxvSW50ZWxpbmtpbmcgPSBhd2FpdCBpbnRlcmxpbmtpbmcoXG4gICAgZGF0b3NBcnRpY3Vsby5hcnRpY3VsbyxcbiAgICBcImVubGFjZXMuY3N2XCIsXG4gICAgZGF0b3NBcnRpY3Vsby5zbHVnXG4gICk7XG5cbiAgLy8gY29uc29sZS5sb2coZGF0b3NBcnRpY3Vsby5hcnRpY3Vsb0ludGVsaW5raW5nKTtcblxuICAvLyBGaW4gRW5sYXphZG8gSW50ZXJub1xuXG4gIGRhdG9zQXJ0aWN1bG8ucmVsYWNpb25hZG9zID0gcmVsYWNpb25hZG9zRGF0b3M7XG5cbiAgLy9SZXR1cm4gdGhlIGNvbnRlbnQgb2YgdGhlIGRhdGEgZmlsZSBpbiBqc29uIGZvcm1hdFxuICByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRvc0FydGljdWxvKTtcbn1cbiJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJpbnRlcmxpbmtpbmciLCJhcnRpY3VsbyIsImRhdGFMaW5rcyIsInNsdWciLCJjYXJwZXRhTGlua3MiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImZpbGVMaW5rcyIsInJlYWRGaWxlU3luYyIsImVubGFjZXNMaXN0IiwidHJpbSIsInNwbGl0IiwidGV4dG8iLCJKU09OIiwic3RyaW5naWZ5IiwiaW5zZXJ0YXJFbmxhY2VzIiwiYW5jaG9UZXh0IiwidXJsIiwiaW5jbHVkZXMiLCJyZXBsYWNlIiwiYW5jaG9FbmxhY2VzQ3JlYWRvcyIsIm51bWVyb01heGltb0VubGFjZXMiLCJkYXRvc0xpbmsiLCJsZW5ndGgiLCJwYXJzZSIsImNoZWNrQW5jaG8iLCJ0aGVuIiwicHVzaCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJub21icmVQb3N0IiwicXVlcnkiLCJpZCIsImpzb25EaXJlY3RvcnkiLCJmaWxlQ29udGVudHMiLCJyZWFkZGlyU3luYyIsImV4aXN0c1N5bmMiLCJzdGF0dXMiLCJqc29uIiwiZGF0b3NBcnRpY3VsbyIsInRvZG9zQXRpY3Vsb3MiLCJyZWxhY2lvbmFkb3NGaWxlIiwiZmlsdGVyIiwiZSIsImZpbGVOYW1lIiwiZGF0YSIsInBhcmVudCIsInJlbGFjaW9uYWRvc0RhdG9zIiwibWFwIiwicG9zdHNSZWxhY2lvbmFkb3MiLCJhcnRpY3Vsb0ludGVsaW5raW5nIiwicmVsYWNpb25hZG9zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/posts/[id].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/posts/[id].js"));
module.exports = __webpack_exports__;

})();